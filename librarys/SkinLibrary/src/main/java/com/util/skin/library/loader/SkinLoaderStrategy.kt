package com.util.skin.library.loader

import android.content.Context
import android.content.res.ColorStateList
import android.content.res.XmlResourceParser
import android.graphics.drawable.Drawable
import android.util.TypedValue
import androidx.annotation.AnyRes

/**
 * 皮肤包加载策略.
 * @PackageName com.util.skin.library.loader
 * @date 2019/1/10 14:35
 * @author zhanglei
 */
interface SkinLoaderStrategy {
    /**
     * [.SKIN_LOADER_STRATEGY_NONE]
     * [.SKIN_LOADER_STRATEGY_ASSETS]
     * [.SKIN_LOADER_STRATEGY_BUILD_IN]
     * [.SKIN_LOADER_STRATEGY_PREFIX_BUILD_IN]
     *
     * @return 皮肤包加载策略类型.
     */
    val type: SkinLoaderStrategyType

    /**
     * 加载皮肤包.
     *
     * @param context  [Context]
     * @param skinName 皮肤包名称.
     * @return 加载成功，返回皮肤包名称；失败，则返回空。
     */
    suspend fun initLoader(context: Context, skinName: String): String?

    /**
     * 根据应用中的资源ID，获取皮肤包相应资源的资源名.
     *
     * @param context  [Context]
     * @param skinName 皮肤包名称.
     * @param resId    应用中需要换肤的资源ID.
     * @return 皮肤包中相应的资源名.
     */
    fun getTargetResourceEntryName(context: Context, skinName: String, resId: Int): String?

    /**
     * 开发者可以拦截应用中的资源ID，返回对应color值。
     *
     * @param context  [Context]
     * @param resId    应用中需要换肤的资源ID.
     * @return 获得拦截后的颜色值，添加到ColorStateList的defaultColor中。不需要拦截，则返回空
     */
    fun getColor(context: Context, resId: Int): Int

    /**
     * 开发者可以拦截应用中的资源ID，返回对应ColorStateList。
     *
     * @param context  [Context]
     * @param resId    应用中需要换肤的资源ID.
     * @return 返回对应ColorStateList。不需要拦截，则返回空
     */
    fun getColorStateList(context: Context, resId: Int): ColorStateList?

    /**
     * 开发者可以拦截应用中的资源ID，返回对应Drawable。
     *
     * @param context  [Context]
     * @param skinName 皮肤包名称.
     * @param resId    应用中需要换肤的资源ID.
     * @return 返回对应Drawable。不需要拦截，则返回空
     */
    fun getDrawable(context: Context, resId: Int): Drawable?

    /**
     * Return an XmlResourceParser through which you can read a generic XML
     * resource for the given resource ID.
     *
     * <p>The XmlPullParser implementation returned here has some limited
     * functionality.  In particular, you can't change its input, and only
     * high-level parsing events are available (since the document was
     * pre-parsed for you at build time, which involved merging text and
     * stripping comments).
     *
     * @param id The desired resource identifier, as generated by the aapt
     *           tool. This integer encodes the package, type, and resource
     *           entry. The value 0 is an invalid identifier.
     *
     * @return A new parser object through which you can read
     *         the XML data.
     *
     */
    fun getXml(context: Context, resId: Int): XmlResourceParser?

    /**
     * Return the raw data associated with a particular resource ID.
     *
     * @param resId The desired resource identifier, as generated by the aapt
     *           tool. This integer encodes the package, type, and resource
     *           entry. The value 0 is an invalid identifier.
     * @param outValue Object in which to place the resource data.
     * @param resolveRefs If true, a resource that is a reference to another
     *                    resource will be followed so that you receive the
     *                    actual final resource data.  If false, the TypedValue
     *                    will be filled in with the reference itself.
     *
     */
    fun getValue(context: Context, @AnyRes resId: Int, outValue: TypedValue, resolveRefs: Boolean)
}